<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Admin Dashboard</title>
<style>
:root{
  --bg:#0b0d10;
  --ink:#ffffff;
  --muted:rgba(255,255,255,.62);
  --line:rgba(255,255,255,.10);
  --radius:26px;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  background:
    radial-gradient(900px 500px at 15% 0%, rgba(255,255,255,.08), transparent 55%),
    radial-gradient(900px 500px at 85% 0%, rgba(255,255,255,.06), transparent 55%),
    var(--bg);
  color:var(--ink);
}
.top{
  position:sticky;top:0;z-index:10;
  backdrop-filter: blur(14px);
  background: rgba(11,13,16,.72);
  border-bottom:1px solid var(--line);
}
.topInner{
  max-width:1200px;margin:0 auto;
  padding:16px 20px;
  display:flex;align-items:center;justify-content:space-between;
}
.kicker{font-size:11px;font-weight:900;letter-spacing:1.6px;text-transform:uppercase;}
.subkicker{margin-top:6px;font-size:12px;color:var(--muted);font-weight:650;}
.pill{
  padding:10px 14px;border:1px solid var(--line);border-radius:999px;
  background:rgba(255,255,255,.04);font-size:12px;font-weight:700;
}

.page{max-width:1200px;margin:0 auto;padding:34px 20px 80px;}

.hero{
  display:flex;justify-content:space-between;align-items:flex-end;
  margin-bottom:22px;
}
.name{font-size:52px;font-weight:950;letter-spacing:-2px;}
.tag{
  padding:10px 14px;border-radius:999px;border:1px solid var(--line);
  background:rgba(255,255,255,.04);font-size:12px;font-weight:900;
  letter-spacing:1px;text-transform:uppercase;
}

.card{
  border:1px solid var(--line);
  border-radius:var(--radius);
  background:rgba(255,255,255,.03);
  padding:20px;
}
.cardStrong{
  background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
}
.sectionTitle{
  font-size:11px;font-weight:900;letter-spacing:1.4px;text-transform:uppercase;color:var(--muted);
}
.big{margin-top:14px;font-size:36px;font-weight:950;}
.sub{margin-top:8px;font-size:13px;color:var(--muted);white-space:pre-wrap;}
.logoWrap{
  width:96px;height:96px;border-radius:26px;overflow:hidden;border:1px solid var(--line);
  background:rgba(255,255,255,.05);
}
.logoWrap img{width:100%;height:100%;object-fit:cover}
.row{display:flex;gap:14px;align-items:center;margin-top:12px;}

/* ---------- CIRCLE STAT UI ---------- */
.rings{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:14px;
}
@media(max-width:900px){
  .rings{ grid-template-columns:1fr; }
}

.ringCard{
  border:1px solid var(--line);
  border-radius:var(--radius);
  background:rgba(255,255,255,.03);
  padding:22px 18px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  min-height:240px;
  position:relative;
  overflow:hidden;
}

.ringGlow{
  position:absolute; inset:-60px;
  background:
    radial-gradient(280px 220px at 30% 25%, rgba(255,255,255,.08), transparent 55%),
    radial-gradient(280px 220px at 70% 70%, rgba(255,255,255,.06), transparent 55%);
  pointer-events:none;
}

.ring{
  width:132px;height:132px;
  border-radius:999px;
  display:grid;
  place-items:center;
  border:1px solid rgba(255,255,255,.18);
  background:
    radial-gradient(circle at 30% 20%, rgba(255,255,255,.10), transparent 55%),
    rgba(255,255,255,.03);
  box-shadow:
    0 14px 40px rgba(0,0,0,.35),
    inset 0 0 0 10px rgba(255,255,255,.03);
}

.ringNum{
  font-size:40px;
  font-weight:950;
  letter-spacing:-1px;
}

.ringLabel{
  margin-top:14px;
  font-size:12px;
  font-weight:950;
  letter-spacing:1.4px;
  text-transform:uppercase;
  color:rgba(255,255,255,.85);
}

.ringSub{
  margin-top:10px;
  font-size:12px;
  font-weight:650;
  color:var(--muted);
  text-align:center;
  max-width:260px;
}
/* ----------------------------------- */
</style>
</head>

<body>

<div class="top">
  <div class="topInner">
    <div>
      <div class="kicker" id="roleText">ROLE: Admin</div>
      <div class="subkicker" id="clubText">CLUB: —</div>
    </div>
    <div class="pill" id="today">—</div>
  </div>
</div>

<div class="page">
  <div class="hero">
    <div class="name" id="clubName">LOADING</div>
    <div class="tag">ADMIN OPS</div>
  </div>

  <div class="card cardStrong" style="margin-bottom:14px;">
    <div class="sectionTitle">Club Profile</div>
    <div class="row">
      <div class="logoWrap" id="logoWrap" style="display:none;">
        <img id="logo" />
      </div>
      <div>
        <div class="big" style="font-size:28px;" id="clubSlug">—</div>
        <div class="sub" id="meta">—</div>
      </div>
    </div>
  </div>

  <!-- CIRCULAR STATS -->
  <div class="rings">
    <div class="ringCard">
      <div class="ringGlow"></div>
      <div class="ring">
        <div class="ringNum" id="playersCount">—</div>
      </div>
      <div class="ringLabel">Players</div>
      <div class="ringSub">Total player profiles in this club.</div>
    </div>

    <div class="ringCard">
      <div class="ringGlow"></div>
      <div class="ring">
        <div class="ringNum" id="coachesCount">—</div>
      </div>
      <div class="ringLabel">Coaches</div>
      <div class="ringSub">Total coach profiles in this club.</div>
    </div>

    <div class="ringCard">
      <div class="ringGlow"></div>
      <div class="ring">
        <div class="ringNum" id="teamsCount">—</div>
      </div>
      <div class="ringLabel">Teams</div>
      <div class="ringSub">Total teams created for this club.</div>
    </div>
  </div>
</div>

<script>
let state = null;

function post(type,payload={}){ window.parent.postMessage({type,payload},"*"); }

function render(){
  if(!state) return;

  document.getElementById("clubText").textContent = "CLUB: " + (state.clubSlug || "—");
  document.getElementById("today").textContent = state.today || "—";

  const clubName = state.club?.name || "ADMIN";
  document.getElementById("clubName").textContent = clubName.toUpperCase();
  document.getElementById("clubSlug").textContent = (state.clubSlug || "").toUpperCase();

  const logoUrl = (state.club?.logoUrl || "").trim();
  if(logoUrl){
    document.getElementById("logo").src = logoUrl;
    document.getElementById("logoWrap").style.display = "block";
  }else{
    document.getElementById("logoWrap").style.display = "none";
  }

  const c = state.counts || {};
  document.getElementById("playersCount").textContent = String(c.players ?? "0");
  document.getElementById("coachesCount").textContent = String(c.coaches ?? "0");
  document.getElementById("teamsCount").textContent = String(c.teams ?? "0");

  document.getElementById("meta").textContent = "Live club totals pulled from CMS.";
}

window.addEventListener("message",(e)=>{
  const m=e.data||{};
  if(m.type==="STATE"){
    state=m.payload;
    render();
  }
});

post("IFRAME_READY",{});
</script>

</body>
</html>

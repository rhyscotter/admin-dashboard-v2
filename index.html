<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Admin Dashboard</title>

<style>
  :root{
    --panel:rgba(17,17,17,.88);
    --border:rgba(255,255,255,.10);
    --text:#fff;
    --muted:rgba(255,255,255,.62);

    /* âœ… CLUB THEME (overridden by payload/theme like player+coach) */
    --accent:#7B2EFF;
    --accent2:#B266FF;
    --clubGlow: rgba(123,46,255,.18);

    --radius:26px;
  }

  *{box-sizing:border-box}
  body{
    margin:0;background:transparent;color:var(--text);
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }

  /* âœ… Match Coach/Player stage */
  .stage{
    min-height:100vh;
    background:
      radial-gradient(1000px 600px at 20% -10%, rgba(255,255,255,.05), transparent 60%),
      linear-gradient(180deg,#000 0%,#050505 100%);
    position:relative;overflow:hidden;
  }
  .stage::before{
    content:"";position:absolute; inset:-40% -20%;
    transform:rotate(-14deg);
    background:linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,.05), rgba(255,255,255,0));
    opacity:.18;pointer-events:none;
  }
  .stage::after{
    content:"";position:absolute; inset:0;
    background:radial-gradient(800px 520px at 80% 18%, var(--clubGlow), transparent 62%);
    opacity:.9;pointer-events:none;
    animation:glowPulse 2.8s ease-in-out infinite;
  }
  @keyframes glowPulse{ 0%{opacity:.55} 50%{opacity:1} 100%{opacity:.55} }

  .top{
    position:sticky;top:0;z-index:10;
    backdrop-filter: blur(14px);
    background: rgba(11,13,16,.72);
    border-bottom:1px solid var(--border);
  }
  .topInner{
    max-width:1200px;margin:0 auto;
    padding:16px 20px;
    display:flex;align-items:center;justify-content:space-between;
    position:relative;z-index:2;
  }
  .kicker{font-size:11px;font-weight:900;letter-spacing:1.6px;text-transform:uppercase;}
  .subkicker{margin-top:6px;font-size:12px;color:var(--muted);font-weight:650;}
  .pill{
    padding:10px 14px;border:1px solid rgba(255,255,255,.14);border-radius:999px;
    background:rgba(255,255,255,.04);font-size:12px;font-weight:800;
    position:relative;overflow:hidden;
  }
  .pill::after{
    content:"";position:absolute;left:12px;right:12px;bottom:8px;height:3px;border-radius:999px;
    background:linear-gradient(90deg, var(--accent), transparent);
    transform:scaleX(.35);transform-origin:left;transition:.18s ease;opacity:.95;
  }
  .pill:hover::after{transform:scaleX(1)}

  .page{max-width:1200px;margin:0 auto;padding:34px 20px 80px;position:relative;z-index:2}

  .hero{display:flex;justify-content:space-between;align-items:flex-end;margin-bottom:18px;gap:12px;flex-wrap:wrap;}
  .name{
    font-family:Impact,Haettenschweiler,'Arial Narrow Bold',sans-serif;
    font-size:52px;
    text-transform:uppercase;
    letter-spacing:1px;
    line-height:1;
    position:relative;
    padding-bottom:10px;
  }
  .name::after{
    content:"";position:absolute;left:0;bottom:0;height:6px;width:100%;
    border-radius:999px;
    background:linear-gradient(90deg, var(--accent), transparent);
    animation:underlineSweep 1.8s linear infinite;
  }
  @keyframes underlineSweep{
    0%{filter:brightness(1); transform:translateX(-2px)}
    50%{filter:brightness(1.12); transform:translateX(2px)}
    100%{filter:brightness(1); transform:translateX(-2px)}
  }
  .tag{
    padding:10px 14px;border-radius:999px;border:1px solid rgba(255,255,255,.14);
    background:rgba(255,255,255,.04);
    font-size:12px;font-weight:900;letter-spacing:1px;text-transform:uppercase;
    box-shadow:0 0 0 1px rgba(255,255,255,.03), 0 0 24px var(--clubGlow);
  }

  .card{
    background:var(--panel);
    border:1px solid var(--border);
    border-radius:18px;
    padding:20px;
    position:relative;
    overflow:hidden;
  }
  .card::before{
    content:"";position:absolute; inset:-60% -20%;
    transform:rotate(-12deg);
    background:linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,.05), rgba(255,255,255,0));
    opacity:.22;pointer-events:none;
  }
  .cardInner{position:relative;z-index:2}
  .cardStrong{box-shadow:0 0 0 1px rgba(255,255,255,.03), 0 0 32px var(--clubGlow);}

  .sectionTitle{
    font-family:Impact,Haettenschweiler,'Arial Narrow Bold',sans-serif;
    font-size:18px;
    text-transform:uppercase;
    letter-spacing:.8px;
    margin:0;
    padding-bottom:8px;
    position:relative;
    color:rgba(255,255,255,.92);
  }
  .sectionTitle::after{
    content:"";position:absolute;left:0;bottom:0;height:4px;width:100%;
    border-radius:999px;background:linear-gradient(90deg, var(--accent), transparent);
    transform:scaleX(.35);transform-origin:left;transition:.18s ease;opacity:.95;
  }
  .card:hover .sectionTitle::after{transform:scaleX(1)}

  .big{margin-top:12px;font-size:28px;font-weight:950;letter-spacing:-1px;}
  .sub{margin-top:10px;font-size:13px;color:var(--muted);white-space:pre-wrap;line-height:1.45;}

  .row{display:flex;gap:14px;align-items:center;margin-top:12px;flex-wrap:wrap;}

  .logoWrap{
    width:96px;height:96px;border-radius:26px;overflow:hidden;
    border:1px solid rgba(255,255,255,.14);
    background:rgba(255,255,255,.05);
    box-shadow:0 0 26px var(--clubGlow);
  }
  .logoWrap img{width:100%;height:100%;object-fit:cover}

  /* ---------- CIRCLE STAT UI (keep layout, add theming accents) ---------- */
  .rings{
    display:grid;
    grid-template-columns: repeat(3, 1fr);
    gap:14px;
    margin-top:14px;
  }
  @media(max-width:900px){ .rings{ grid-template-columns:1fr; } }

  .ringCard{
    background:var(--panel);
    border:1px solid var(--border);
    border-radius:18px;
    padding:22px 18px;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    min-height:240px;
    position:relative;
    overflow:hidden;
  }
  .ringCard::before{
    content:"";position:absolute; inset:-60% -20%;
    transform:rotate(-12deg);
    background:linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,.05), rgba(255,255,255,0));
    opacity:.18;pointer-events:none;
  }

  .ringGlow{
    position:absolute; inset:0;
    background:radial-gradient(520px 320px at 80% 18%, var(--clubGlow), transparent 62%);
    opacity:.9;pointer-events:none;
    animation:glowPulse 2.8s ease-in-out infinite;
  }

  .ring{
    width:132px;height:132px;
    border-radius:999px;
    display:grid;
    place-items:center;
    border:1px solid rgba(255,255,255,.18);
    background:
      radial-gradient(circle at 30% 20%, rgba(255,255,255,.10), transparent 55%),
      rgba(255,255,255,.03);
    box-shadow:
      0 14px 40px rgba(0,0,0,.35),
      inset 0 0 0 10px rgba(255,255,255,.03),
      0 0 38px var(--clubGlow);
    position:relative;
    overflow:hidden;
  }
  .ring::after{
    content:"";position:absolute;left:18px;right:18px;bottom:14px;height:6px;border-radius:999px;
    background:linear-gradient(90deg, var(--accent), transparent);
    transform:scaleX(.35);transform-origin:left;transition:.18s ease;opacity:.95;
  }
  .ringCard:hover .ring::after{transform:scaleX(1)}

  .ringNum{
    font-family:Impact,Haettenschweiler,'Arial Narrow Bold',sans-serif;
    font-size:44px;
    font-weight:950;
    letter-spacing:-1px;
  }
  .ringLabel{
    margin-top:14px;
    font-size:12px;
    font-weight:950;
    letter-spacing:1.4px;
    text-transform:uppercase;
    color:rgba(255,255,255,.92);
  }
  .ringSub{
    margin-top:10px;
    font-size:12px;
    font-weight:650;
    color:var(--muted);
    text-align:center;
    max-width:260px;
  }
  /* ----------------------------------- */
</style>
</head>

<body>
<div class="stage">

  <div class="top">
    <div class="topInner">
      <div>
        <div class="kicker" id="roleText">ROLE: Admin</div>
        <div class="subkicker" id="clubText">CLUB: â€”</div>
      </div>
      <div class="pill" id="today">â€”</div>
    </div>
  </div>

  <div class="page">
    <div class="hero">
      <div class="name" id="clubName">LOADING</div>
      <div class="tag">ADMIN OPS</div>
    </div>

    <div class="card cardStrong" style="margin-bottom:14px;">
      <div class="cardInner">
        <div class="sectionTitle">Club Profile</div>
        <div class="row">
          <div class="logoWrap" id="logoWrap" style="display:none;">
            <img id="logo" />
          </div>
          <div>
            <div class="big" id="clubSlug">â€”</div>
            <div class="sub" id="meta">â€”</div>
          </div>
        </div>
      </div>
    </div>

    <!-- CIRCULAR STATS -->
    <div class="rings">
      <div class="ringCard cardStrong">
        <div class="ringGlow"></div>
        <div class="ring">
          <div class="ringNum" id="playersCount">â€”</div>
        </div>
        <div class="ringLabel">Players</div>
        <div class="ringSub">Total player profiles in this club.</div>
      </div>

      <div class="ringCard cardStrong">
        <div class="ringGlow"></div>
        <div class="ring">
          <div class="ringNum" id="coachesCount">â€”</div>
        </div>
        <div class="ringLabel">Coaches</div>
        <div class="ringSub">Total coach profiles in this club.</div>
      </div>

      <div class="ringCard cardStrong">
        <div class="ringGlow"></div>
        <div class="ring">
          <div class="ringNum" id="teamsCount">â€”</div>
        </div>
        <div class="ringLabel">Teams</div>
        <div class="ringSub">Total teams created for this club.</div>
      </div>
    </div>
  </div>

<script>
let state = null;

function post(type,payload={}){ window.parent.postMessage({type,payload},"*"); }

/* âœ… THEME APPLY (matches player dashboard behaviour) */
function applyTheme(theme){
  const t = theme || {};
  const accent  = String(t.accent  || t.primary || "#7B2EFF").trim();
  const accent2 = String(t.accent2 || accent).trim();
  const glow    = String(t.glow    || t.clubGlow || "rgba(123,46,255,.18)").trim();
  const r = document.documentElement.style;
  r.setProperty("--accent", accent);
  r.setProperty("--accent2", accent2);
  r.setProperty("--clubGlow", glow);
  console.log("ðŸŸª ADMIN DASH THEME APPLIED", { accent, accent2, glow });
}

function render(){
  if(!state) return;

  document.getElementById("clubText").textContent = "CLUB: " + (state.clubSlug || "â€”");
  document.getElementById("today").textContent = state.today || "â€”";

  const clubName = state.club?.name || "ADMIN";
  document.getElementById("clubName").textContent = clubName.toUpperCase();
  document.getElementById("clubSlug").textContent = (state.clubSlug || "").toUpperCase();

  const logoUrl = (state.club?.logoUrl || "").trim();
  if(logoUrl){
    document.getElementById("logo").src = logoUrl;
    document.getElementById("logoWrap").style.display = "block";
  }else{
    document.getElementById("logoWrap").style.display = "none";
  }

  const c = state.counts || {};
  document.getElementById("playersCount").textContent = String(c.players ?? "0");
  document.getElementById("coachesCount").textContent = String(c.coaches ?? "0");
  document.getElementById("teamsCount").textContent = String(c.teams ?? "0");

  document.getElementById("meta").textContent = "Live club totals pulled from CMS.";
}

window.addEventListener("message",(e)=>{
  const m=e.data||{};
  if(!m) return;

  /* âœ… Same theme ingestion pattern as player: THEME + STATE.theme */
  if(m.type === "THEME"){
    const theme = m.payload?.theme || m.payload || m.theme || null;
    if(theme) applyTheme(theme);
    return;
  }

  if(m.type==="STATE"){
    state=m.payload || null;

    const theme = state?.theme || null;
    if(theme) applyTheme(theme);

    render();
    return;
  }
});

post("IFRAME_READY",{});
</script>

</div>
</body>
</html>
